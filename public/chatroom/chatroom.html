<!DOCTYPE html>
<html>
  <head>
    <title>Chat Room</title>
  </head>

  <body>
    <h1>Chat Room</h1>
    
    <div id="chatroom"></div>
    <form id="message">
      <input size="35" id="msg"></input>
      <input type="submit"></input>
    </form>

    <script src="http://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    
    <script>
      jQuery(function($){
        var socket = io.connect();
        var $msgForm = $('#message');
        var $msgBox = $('#msg');
        var $chat = $('#chatroom');

        $msgForm.submit(function(sub){
          sub.preventDefault();
          socket.emit('send message', $msgBox.val());
          $msgBox.val('');
        });

        socket.on('new message', function(mes){
          $chat.append(mes + "<br/>")
        });
      });
    </script>

  </body>
</html>
